version: '3.9'
services:
  web:
    build:
      context: .
      dockerfile: DigitalButler.Web/Dockerfile
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - AI_BASE_URL=${AI_BASE_URL}
      - AI_MODEL=${AI_MODEL}
      - AI_API_KEY=${AI_API_KEY}
      - BUTLER_ADMIN_USERNAME=${BUTLER_ADMIN_USERNAME}
      - BUTLER_ADMIN_PASSWORD=${BUTLER_ADMIN_PASSWORD}
      - BUTLER_ADMIN_PASSWORD_HASH=${BUTLER_ADMIN_PASSWORD_HASH}
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - TELEGRAM_CHAT_ID=${TELEGRAM_CHAT_ID}
      - GCAL_ICAL_URLS=${GCAL_ICAL_URLS}
      - GCAL_FEED1_NAME=${GCAL_FEED1_NAME}
      - GCAL_FEED1_URL=${GCAL_FEED1_URL}
      - GMAIL_ACCOUNTS=${GMAIL_ACCOUNTS}
      - GMAIL_HOST=${GMAIL_HOST}
      - GMAIL_PORT=${GMAIL_PORT}
      - GMAIL_USE_SSL=${GMAIL_USE_SSL}
      - GMAIL_UNREAD_ONLY_DEFAULT=${GMAIL_UNREAD_ONLY_DEFAULT}
      - GMAIL_DAYS_BACK_DEFAULT=${GMAIL_DAYS_BACK_DEFAULT}
      - GMAIL_MAX_MESSAGES_DEFAULT=${GMAIL_MAX_MESSAGES_DEFAULT}
      - Database__SqlitePath=/data/butler.db
    ports:
      - "8080:8080"
    volumes:
      - butler-data:/data
    restart: unless-stopped
volumes:
  butler-data:

